/** @license

 *

 * SoundManager 2: JavaScript Sound for the Web

 * ----------------------------------------------

 * http://schillmania.com/projects/soundmanager2/

 *

 * Copyright (c) 2007, Scott Schiller. All rights reserved.

 * Code provided under the BSD License:

 * http://schillmania.com/projects/soundmanager2/license.txt

 *

 * V2.97a.20120916

 */
!function(e){function t(t,n){function o(e){return s.preferFlash&&kt&&!s.ignoreFlash&&"undefined"!=typeof s.flash[e]&&s.flash[e]}function i(e){return function(t){var n=this._t,o;return n&&n._a?o=e.call(this,t):(s._wD(n&&n.id?d+"ignoring "+t.type+": "+n.id:d+"ignoring "+t.type),o=null),o}}this.setupOptions={url:t||null,flashVersion:8,debugMode:!0,debugFlash:!1,useConsole:!0,consoleOnly:!0,waitForWindowLoad:!1,bgColor:"#ffffff",useHighPerformance:!1,flashPollingInterval:null,html5PollingInterval:null,flashLoadTimeout:1e3,wmode:null,allowScriptAccess:"always",useFlashBlock:!1,useHTML5Audio:!0,html5Test:/^(probably|maybe)$/i,preferFlash:!0,noSWFCache:!1},this.defaultOptions={autoLoad:!1,autoPlay:!1,from:null,loops:1,onid3:null,onload:null,whileloading:null,onplay:null,onpause:null,onresume:null,whileplaying:null,onposition:null,onstop:null,onfailure:null,onfinish:null,multiShot:!0,multiShotEvents:!1,position:null,pan:0,stream:!0,to:null,type:null,usePolicyFile:!0,volume:100},this.flash9Options={isMovieStar:null,usePeakData:!1,useWaveformData:!1,useEQData:!1,onbufferchange:null,ondataerror:null},this.movieStarOptions={bufferTime:3,serverURL:null,onconnect:null,duration:null},this.audioFormats={mp3:{type:['audio/mpeg; codecs="mp3"',"audio/mpeg","audio/mp3","audio/MPA","audio/mpa-robust"],required:!0},mp4:{related:["aac","m4a","m4b"],type:['audio/mp4; codecs="mp4a.40.2"',"audio/aac","audio/x-m4a","audio/MP4A-LATM","audio/mpeg4-generic"],required:!1},ogg:{type:["audio/ogg; codecs=vorbis"],required:!1},wav:{type:['audio/wav; codecs="1"',"audio/wav","audio/wave","audio/x-wav"],required:!1}},this.movieID="sm2-container",this.id=n||"sm2movie",this.debugID="soundmanager-debug",this.debugURLParam=/([#?&])debug=1/i,this.versionNumber="V2.97a.20120916",this.version=null,this.movieURL=null,this.altURL=null,this.swfLoaded=!1,this.enabled=!1,this.oMC=null,this.sounds={},this.soundIDs=[],this.muted=!1,this.didFlashBlock=!1,this.filePattern=null,this.filePatterns={flash8:/\.mp3(\?.*)?$/i,flash9:/\.mp3(\?.*)?$/i},this.features={buffering:!1,peakData:!1,waveformData:!1,eqData:!1,movieStar:!1},this.sandbox={type:null,types:{remote:"remote (domain-based) rules",localWithFile:"local with file access (no internet access)",localWithNetwork:"local with network (internet access only, no local access)",localTrusted:"local, trusted (local+internet access)"},description:null,noRemote:null,noLocal:null},this.hasHTML5=function(){try{return"undefined"!=typeof Audio&&"undefined"!=typeof(jt&&opera.version()<10?new Audio(null):new Audio).canPlayType}catch(e){return!1}}(),this.html5={usingFlash:null},this.flash={},this.html5Only=!1,this.ignoreFlash=!1;var a,s=this,r=null,l="soundManager",u=l+"::",d="HTML5::",f,p=navigator.userAgent,c=e,h=c.location.href.toString(),m=document,_,y,g,w,v=[],b=!0,O,D=!1,M=!1,S=!1,L=!1,T=!1,P,F=0,I,H,E,k,C,A,x,N,R,U,B,W,j,q,V,J,Q,K,X,G,z,Y=["log","info","warn","error"],Z=8,et,tt,nt,ot=null,it=null,at,st,rt,lt,ut,dt,ft,pt,ct,ht=!1,mt=!1,_t,yt,gt,wt=0,vt=null,bt,Ot=null,Dt,Mt,St,Lt,Tt,Pt,Ft,It,Ht=Array.prototype.slice,Et=!1,kt,Ct,At,xt,Nt,Rt=p.match(/(ipad|iphone|ipod)/i),Ut=p.match(/msie/i),Bt=p.match(/webkit/i),Wt=p.match(/safari/i)&&!p.match(/chrome/i),jt=p.match(/opera/i),qt=p.match(/(mobile|pre\/|xoom)/i)||Rt,Vt=!h.match(/usehtml5audio/i)&&!h.match(/sm2\-ignorebadua/i)&&Wt&&!p.match(/silk/i)&&p.match(/OS X 10_6_([3-7])/i),Jt="undefined"!=typeof console&&"undefined"!=typeof console.log,Qt="undefined"!=typeof m.hasFocus?m.hasFocus():null,$t=Wt&&("undefined"==typeof m.hasFocus||!m.hasFocus()),Kt=!$t,Xt=/(mp3|mp4|mpa|m4a|m4b)/i,Gt="about:blank",zt=m.location?m.location.protocol.match(/http/i):null,Yt=zt?"":"http://",Zt=/^\s*audio\/(?:x-)?(?:mpeg4|aac|flv|mov|mp4||m4v|m4a|m4b|mp4v|3gp|3g2)\s*(?:$|;)/i,en=["mpeg4","aac","flv","mov","mp4","m4v","f4v","m4a","m4b","mp4v","3gp","3g2"],tn=new RegExp("\\.("+en.join("|")+")(\\?.*)?$","i");this.mimePattern=/^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i,this.useAltURL=!zt,this._global_a=null,lt={swfBox:"sm2-object-box",swfDefault:"movieContainer",swfError:"swf_error",swfTimedout:"swf_timedout",swfLoaded:"swf_loaded",swfUnblocked:"swf_unblocked",sm2Debug:"sm2_debug",highPerf:"high_performance",flashDebug:"flash_debug"},qt&&(s.useHTML5Audio=!0,s.preferFlash=!1,Rt&&(s.ignoreFlash=!0,Et=!0)),this.setup=function(e){var t=!s.url;return"undefined"!=typeof e&&S&&Ot&&s.ok()&&("undefined"!=typeof e.flashVersion||"undefined"!=typeof e.url)&&pt(at("setupLate")),E(e),t&&J&&"undefined"!=typeof e.url&&s.beginDelayedInit(),J||"undefined"==typeof e.url||"complete"!==m.readyState||setTimeout(q,1),s},this.ok=function(){return Ot?S&&!L:s.useHTML5Audio&&s.hasHTML5},this.supported=this.ok,this.getMovie=function(e){return f(e)||m[e]||c[e]},this.createSound=function(e,t){function n(){return u=dt(u),s.sounds[f.id]=new a(f),s.soundIDs.push(f.id),s.sounds[f.id]}var o,i,u=null,d=null,f=null;return o=l+".createSound(): ",i=o+at(S?"notOK":"notReady"),S&&s.ok()?("undefined"!=typeof t&&(e={id:e,url:t}),u=H(e),u.url=bt(u.url),f=u,f.id.toString().charAt(0).match(/^[0-9]$/)&&s._wD(o+at("badID",f.id),2),s._wD(o+f.id+" ("+f.url+")",1),ct(f.id,!0)?(s._wD(o+f.id+" exists",1),s.sounds[f.id]):(Mt(f)?(d=n(),s._wD("Creating sound "+f.id+", using HTML5"),d._setup_html5(f)):(w>8&&(null===f.isMovieStar&&(f.isMovieStar=!(!f.serverURL&&(f.type?!f.type.match(Zt):1)&&!f.url.match(tn))),f.isMovieStar&&(s._wD(o+"using MovieStar handling"),f.loops>1&&P("noNSLoop"))),f=ft(f,o),d=n(),8===w?r._createSound(f.id,f.loops||1,f.usePolicyFile):(r._createSound(f.id,f.url,f.usePeakData,f.useWaveformData,f.useEQData,f.isMovieStar,f.isMovieStar?f.bufferTime:!1,f.loops||1,f.serverURL,f.duration||null,f.autoPlay,!0,f.autoLoad,f.usePolicyFile),f.serverURL||(d.connected=!0,f.onconnect&&f.onconnect.apply(d))),f.serverURL||!f.autoLoad&&!f.autoPlay||d.load(f)),!f.serverURL&&f.autoPlay&&d.play(),d)):(pt(i),!1)},this.destroySound=function(e,t){if(!ct(e))return!1;var n=s.sounds[e],o;for(n._iO={},n.stop(),n.unload(),o=0;o<s.soundIDs.length;o++)if(s.soundIDs[o]===e){s.soundIDs.splice(o,1);break}return t||n.destruct(!0),n=null,delete s.sounds[e],!0},this.load=function(e,t){return ct(e)?s.sounds[e].load(t):!1},this.unload=function(e){return ct(e)?s.sounds[e].unload():!1},this.onPosition=function(e,t,n,o){return ct(e)?s.sounds[e].onposition(t,n,o):!1},this.onposition=this.onPosition,this.clearOnPosition=function(e,t,n){return ct(e)?s.sounds[e].clearOnPosition(t,n):!1},this.play=function(e,t){var n=!1;return S&&s.ok()?ct(e)?s.sounds[e].play(t):(t instanceof Object||(t={url:t}),t&&t.url&&(s._wD(l+'.play(): attempting to create "'+e+'"',1),t.id=e,n=s.createSound(t).play()),n):(pt(l+".play(): "+at(S?"notOK":"notReady")),n)},this.start=this.play,this.setPosition=function(e,t){return ct(e)?s.sounds[e].setPosition(t):!1},this.stop=function(e){return ct(e)?(s._wD(l+".stop("+e+")",1),s.sounds[e].stop()):!1},this.stopAll=function(){var e;s._wD(l+".stopAll()",1);for(e in s.sounds)s.sounds.hasOwnProperty(e)&&s.sounds[e].stop()},this.pause=function(e){return ct(e)?s.sounds[e].pause():!1},this.pauseAll=function(){var e;for(e=s.soundIDs.length-1;e>=0;e--)s.sounds[s.soundIDs[e]].pause()},this.resume=function(e){return ct(e)?s.sounds[e].resume():!1},this.resumeAll=function(){var e;for(e=s.soundIDs.length-1;e>=0;e--)s.sounds[s.soundIDs[e]].resume()},this.togglePause=function(e){return ct(e)?s.sounds[e].togglePause():!1},this.setPan=function(e,t){return ct(e)?s.sounds[e].setPan(t):!1},this.setVolume=function(e,t){return ct(e)?s.sounds[e].setVolume(t):!1},this.mute=function(e){var t=0;if("string"!=typeof e&&(e=null),e)return ct(e)?(s._wD(l+'.mute(): Muting "'+e+'"'),s.sounds[e].mute()):!1;for(s._wD(l+".mute(): Muting all sounds"),t=s.soundIDs.length-1;t>=0;t--)s.sounds[s.soundIDs[t]].mute();return s.muted=!0,!0},this.muteAll=function(){s.mute()},this.unmute=function(e){var t;if("string"!=typeof e&&(e=null),e)return ct(e)?(s._wD(l+'.unmute(): Unmuting "'+e+'"'),s.sounds[e].unmute()):!1;for(s._wD(l+".unmute(): Unmuting all sounds"),t=s.soundIDs.length-1;t>=0;t--)s.sounds[s.soundIDs[t]].unmute();return s.muted=!1,!0},this.unmuteAll=function(){s.unmute()},this.toggleMute=function(e){return ct(e)?s.sounds[e].toggleMute():!1},this.getMemoryUse=function(){var e=0;return r&&8!==w&&(e=parseInt(r._getMemoryUse(),10)),e},this.disable=function(e){var t;if("undefined"==typeof e&&(e=!1),L)return!1;for(L=!0,P("shutdown",1),t=s.soundIDs.length-1;t>=0;t--)et(s.sounds[s.soundIDs[t]]);return I(e),It.remove(c,"load",x),!0},this.canPlayMIME=function(e){var t;return s.hasHTML5&&(t=St({type:e})),!t&&Ot&&(t=e&&s.ok()?!!((w>8?e.match(Zt):null)||e.match(s.mimePattern)):null),t},this.canPlayURL=function(e){var t;return s.hasHTML5&&(t=St({url:e})),!t&&Ot&&(t=e&&s.ok()?!!e.match(s.filePattern):null),t},this.canPlayLink=function(e){return"undefined"!=typeof e.type&&e.type&&s.canPlayMIME(e.type)?!0:s.canPlayURL(e.href)},this.getSoundById=function(e,t){if(!e)throw new Error(l+".getSoundById(): sID is null/undefined");var n=s.sounds[e];return n||t||s._wD('"'+e+'" is an invalid sound ID.',2),n},this.onready=function(e,t){var n="onready",o=!1;if("function"!=typeof e)throw at("needFunction",n);return S&&s._wD(at("queue",n)),t||(t=c),C(n,e,t),A(),o=!0,o},this.ontimeout=function(e,t){var n="ontimeout",o=!1;if("function"!=typeof e)throw at("needFunction",n);return S&&s._wD(at("queue",n)),t||(t=c),C(n,e,t),A({type:n}),o=!0,o},this._writeDebug=function(e,t,n){var o="soundmanager-debug",i,a,r;if(!s.debugMode)return!1;if("undefined"!=typeof n&&n&&(e=e+" | "+(new Date).getTime()),Jt&&s.useConsole&&(r=Y[t],"undefined"!=typeof console[r]?console[r](e):console.log(e),s.consoleOnly))return!0;try{if(i=f(o),!i)return!1;a=m.createElement("div"),++F%2===0&&(a.className="sm2-alt"),t="undefined"==typeof t?0:parseInt(t,10),a.appendChild(m.createTextNode(e)),t&&(t>=2&&(a.style.fontWeight="bold"),3===t&&(a.style.color="#ff3333")),i.insertBefore(a,i.firstChild)}catch(l){}return i=null,!0},this._wD=this._writeDebug,this._debug=function(){var e,t;for(P("currentObj",1),e=0,t=s.soundIDs.length;t>e;e++)s.sounds[s.soundIDs[e]]._debug()},this.reboot=function(){s._wD(l+".reboot()"),s.soundIDs.length&&s._wD("Destroying "+s.soundIDs.length+" SMSound objects...");var e,t;for(e=s.soundIDs.length-1;e>=0;e--)s.sounds[s.soundIDs[e]].destruct();if(r)try{Ut&&(it=r.innerHTML),ot=r.parentNode.removeChild(r),s._wD("Flash movie removed.")}catch(n){P("badRemove",2)}it=ot=Ot=null,s.enabled=J=S=ht=mt=D=M=L=s.swfLoaded=!1,s.soundIDs=[],s.sounds={},r=null;for(e in v)if(v.hasOwnProperty(e))for(t=v[e].length-1;t>=0;t--)v[e][t].fired=!1;s._wD(l+": Rebooting..."),c.setTimeout(s.beginDelayedInit,20)},this.getMoviePercent=function(){return r&&"undefined"!=typeof r.PercentLoaded?r.PercentLoaded():null},this.beginDelayedInit=function(){T=!0,q(),setTimeout(function(){return mt?!1:(K(),j(),mt=!0,!0)},20),N()},this.destruct=function(){s._wD(l+".destruct()"),s.disable(!0)},a=function(e){var t=this,n,o,i,a,l,u,f=!1,p=[],c=0,h,m,_=null,y;y={duration:null,time:null},this.id=e.id,this.sID=this.id,this.url=e.url,this.options=H(e),this.instanceOptions=this.options,this._iO=this.instanceOptions,this.pan=this.options.pan,this.volume=this.options.volume,this.isHTML5=!1,this._a=null,this.id3={},this._debug=function(){if(s.debugMode){var e=null,n=[],o,i,a=64;for(e in t.options)null!==t.options[e]&&("function"==typeof t.options[e]?(o=t.options[e].toString(),o=o.replace(/\s\s+/g," "),i=o.indexOf("{"),n.push(" "+e+": {"+o.substr(i+1,Math.min(Math.max(o.indexOf("\n")-1,a),a)).replace(/\n/g,"")+"... }")):n.push(" "+e+": "+t.options[e]));s._wD("SMSound() merged options: {\n"+n.join(", \n")+"\n}")}},this._debug(),this.load=function(e){var n=null,o;if("undefined"!=typeof e?(t._iO=H(e,t.options),t.instanceOptions=t._iO):(e=t.options,t._iO=e,t.instanceOptions=t._iO,_&&_!==t.url&&(P("manURL"),t._iO.url=t.url,t.url=null)),t._iO.url||(t._iO.url=t.url),t._iO.url=bt(t._iO.url),s._wD("SMSound.load(): "+t._iO.url,1),t._iO.url===t.url&&0!==t.readyState&&2!==t.readyState)return P("onURL",1),3===t.readyState&&t._iO.onload&&t._iO.onload.apply(t,[!!t.duration]),t;if(o=t._iO,_=t.url&&t.url.toString?t.url.toString():null,t.loaded=!1,t.readyState=1,t.playState=0,t.id3={},Mt(o))n=t._setup_html5(o),n._called_load?s._wD(d+"ignoring request to load again: "+t.id):(s._wD(d+"load: "+t.id),t._html5_canplay=!1,t._a.src!==o.url&&(s._wD(P("manURL")+": "+o.url),t._a.src=o.url,t.setPosition(0)),t._a.autobuffer="auto",t._a.preload="auto",n._called_load=!0,o.autoPlay&&t.play());else try{t.isHTML5=!1,t._iO=ft(dt(o)),o=t._iO,8===w?r._load(t.id,o.url,o.stream,o.autoPlay,o.whileloading?1:0,o.loops||1,o.usePolicyFile):r._load(t.id,o.url,!!o.stream,!!o.autoPlay,o.loops||1,!!o.autoLoad,o.usePolicyFile)}catch(i){P("smError",2),O("onload",!1),X({type:"SMSOUND_LOAD_JS_EXCEPTION",fatal:!0})}return t.url=o.url,t},this.unload=function(){return 0!==t.readyState&&(s._wD('SMSound.unload(): "'+t.id+'"'),t.isHTML5?(a(),t._a&&(t._a.pause(),Tt(t._a,Gt),t.url=Gt)):8===w?r._unload(t.id,Gt):r._unload(t.id),n()),t},this.destruct=function(e){s._wD('SMSound.destruct(): "'+t.id+'"'),t.isHTML5?(a(),t._a&&(t._a.pause(),Tt(t._a),Et||i(),t._a._t=null,t._a=null)):(t._iO.onfailure=null,r._destroySound(t.id)),e||s.destroySound(t.id,!0)},this.play=function(e,n){var o,i,a,d,p=!0,c=null;if(o="SMSound.play(): ",n="undefined"==typeof n?!0:n,e||(e={}),t.url&&(t._iO.url=t.url),t._iO=H(t._iO,t.options),t._iO=H(e,t._iO),t._iO.url=bt(t._iO.url),t.instanceOptions=t._iO,t._iO.serverURL&&!t.connected)return t.getAutoPlay()||(s._wD(o+" Netstream not connected yet - setting autoPlay"),t.setAutoPlay(!0)),t;if(Mt(t._iO)&&(t._setup_html5(t._iO),l()),1!==t.playState||t.paused||(i=t._iO.multiShot,i?s._wD(o+'"'+t.id+'" already playing (multi-shot)',1):(s._wD(o+'"'+t.id+'" already playing (one-shot)',1),c=t)),null!==c)return c;if(e.url&&e.url!==t.url&&t.load(t._iO),t.loaded?s._wD(o+'"'+t.id+'"'):0===t.readyState?(s._wD(o+'Attempting to load "'+t.id+'"',1),t.isHTML5?t.load(t._iO):(t._iO.autoPlay=!0,t.load(t._iO))):2===t.readyState?(s._wD(o+'Could not load "'+t.id+'" - exiting',2),c=t):s._wD(o+'"'+t.id+'" is loading - attempting to play..',1),null!==c)return c;if(!t.isHTML5&&9===w&&t.position>0&&t.position===t.duration&&(s._wD(o+'"'+t.id+'": Sound at end, resetting to position:0'),e.position=0),t.paused&&t.position>=0&&(!t._iO.serverURL||t.position>0))s._wD(o+'"'+t.id+'" is resuming from paused state',1),t.resume();else{if(t._iO=H(e,t._iO),null!==t._iO.from&&null!==t._iO.to&&0===t.instanceCount&&0===t.playState&&!t._iO.serverURL){if(d=function(){t._iO=H(e,t._iO),t.play(t._iO)},t.isHTML5&&!t._html5_canplay?(s._wD(o+'Beginning load of "'+t.id+'" for from/to case'),t.load({_oncanplay:d}),c=!1):t.isHTML5||t.loaded||t.readyState&&2===t.readyState||(s._wD(o+'Preloading "'+t.id+'" for from/to case'),t.load({onload:d}),c=!1),null!==c)return c;t._iO=m()}s._wD(o+'"'+t.id+'" is starting to play'),(!t.instanceCount||t._iO.multiShotEvents||!t.isHTML5&&w>8&&!t.getAutoPlay())&&t.instanceCount++,t._iO.onposition&&0===t.playState&&u(t),t.playState=1,t.paused=!1,t.position="undefined"==typeof t._iO.position||isNaN(t._iO.position)?0:t._iO.position,t.isHTML5||(t._iO=ft(dt(t._iO))),t._iO.onplay&&n&&(t._iO.onplay.apply(t),f=!0),t.setVolume(t._iO.volume,!0),t.setPan(t._iO.pan,!0),t.isHTML5?(l(),a=t._setup_html5(),t.setPosition(t._iO.position),a.play()):(p=r._start(t.id,t._iO.loops||1,9===w?t._iO.position:t._iO.position/1e3,t._iO.multiShot),9!==w||p||(s._wD(o+t.id+": No sound hardware, or 32-sound ceiling hit"),t._iO.onplayerror&&t._iO.onplayerror.apply(t)))}return t},this.start=this.play,this.stop=function(e){var n=t._iO,o;return 1===t.playState&&(t._onbufferchange(0),t._resetOnPosition(0),t.paused=!1,t.isHTML5||(t.playState=0),h(),n.to&&t.clearOnPosition(n.to),t.isHTML5?t._a&&(o=t.position,t.setPosition(0),t.position=o,t._a.pause(),t.playState=0,t._onTimer(),a()):(r._stop(t.id,e),n.serverURL&&t.unload()),t.instanceCount=0,t._iO={},n.onstop&&n.onstop.apply(t)),t},this.setAutoPlay=function(e){s._wD("sound "+t.id+" turned autoplay "+(e?"on":"off")),t._iO.autoPlay=e,t.isHTML5||(r._setAutoPlay(t.id,e),e&&(t.instanceCount||1!==t.readyState||(t.instanceCount++,s._wD("sound "+t.id+" incremented instance count to "+t.instanceCount))))},this.getAutoPlay=function(){return t._iO.autoPlay},this.setPosition=function(e){"undefined"==typeof e&&(e=0);var n,o,i,a=t.isHTML5?Math.max(e,0):Math.min(t.duration||t._iO.duration,Math.max(e,0));if(n=t.position,t.position=a,i=t.position/1e3,t._resetOnPosition(t.position),t._iO.position=a,t.isHTML5){if(t._a)if(t._html5_canplay){if(t._a.currentTime!==i){s._wD("setPosition("+i+"): setting position");try{t._a.currentTime=i,(0===t.playState||t.paused)&&t._a.pause()}catch(l){s._wD("setPosition("+i+"): setting position failed: "+l.message,2)}}}else s._wD("setPosition("+i+"): delaying, sound not ready")}else o=9===w?t.position:i,t.readyState&&2!==t.readyState&&r._setPosition(t.id,o,t.paused||!t.playState,t._iO.multiShot);return t.isHTML5&&t.paused&&t._onTimer(!0),t},this.pause=function(e){return t.paused||0===t.playState&&1!==t.readyState?t:(s._wD("SMSound.pause()"),t.paused=!0,t.isHTML5?(t._setup_html5().pause(),a()):(e||"undefined"==typeof e)&&r._pause(t.id,t._iO.multiShot),t._iO.onpause&&t._iO.onpause.apply(t),t)},this.resume=function(){var e=t._iO;return t.paused?(s._wD("SMSound.resume()"),t.paused=!1,t.playState=1,t.isHTML5?(t._setup_html5().play(),l()):(e.isMovieStar&&!e.serverURL&&t.setPosition(t.position),r._pause(t.id,e.multiShot)),!f&&e.onplay?(e.onplay.apply(t),f=!0):e.onresume&&e.onresume.apply(t),t):t},this.togglePause=function(){return s._wD("SMSound.togglePause()"),0===t.playState?(t.play({position:9!==w||t.isHTML5?t.position/1e3:t.position}),t):(t.paused?t.resume():t.pause(),t)},this.setPan=function(e,n){return"undefined"==typeof e&&(e=0),"undefined"==typeof n&&(n=!1),t.isHTML5||r._setPan(t.id,e),t._iO.pan=e,n||(t.pan=e,t.options.pan=e),t},this.setVolume=function(e,n){return"undefined"==typeof e&&(e=100),"undefined"==typeof n&&(n=!1),t.isHTML5?t._a&&(t._a.volume=Math.max(0,Math.min(1,e/100))):r._setVolume(t.id,s.muted&&!t.muted||t.muted?0:e),t._iO.volume=e,n||(t.volume=e,t.options.volume=e),t},this.mute=function(){return t.muted=!0,t.isHTML5?t._a&&(t._a.muted=!0):r._setVolume(t.id,0),t},this.unmute=function(){t.muted=!1;var e="undefined"!=typeof t._iO.volume;return t.isHTML5?t._a&&(t._a.muted=!1):r._setVolume(t.id,e?t._iO.volume:t.options.volume),t},this.toggleMute=function(){return t.muted?t.unmute():t.mute()},this.onPosition=function(e,n,o){return p.push({position:parseInt(e,10),method:n,scope:"undefined"!=typeof o?o:t,fired:!1}),t},this.onposition=this.onPosition,this.clearOnPosition=function(e,t){var n;if(e=parseInt(e,10),isNaN(e))return!1;for(n=0;n<p.length;n++)e===p[n].position&&(t&&t!==p[n].method||(p[n].fired&&c--,p.splice(n,1)))},this._processOnPosition=function(){var e,n,o=p.length;if(!o||!t.playState||c>=o)return!1;for(e=o-1;e>=0;e--)n=p[e],!n.fired&&t.position>=n.position&&(n.fired=!0,c++,n.method.apply(n.scope,[n.position]));return!0},this._resetOnPosition=function(e){var t,n,o=p.length;if(!o)return!1;for(t=o-1;t>=0;t--)n=p[t],n.fired&&e<=n.position&&(n.fired=!1,c--);return!0},m=function(){var e=t._iO,n=e.from,o=e.to,i,a;return a=function(){s._wD(t.id+': "to" time of '+o+" reached."),t.clearOnPosition(o,a),t.stop()},i=function(){s._wD(t.id+': playing "from" '+n),null===o||isNaN(o)||t.onPosition(o,a)},null===n||isNaN(n)||(e.position=n,e.multiShot=!1,i()),e},u=function(){var e,n=t._iO.onposition;if(n)for(e in n)n.hasOwnProperty(e)&&t.onPosition(parseInt(e,10),n[e])},h=function(){var e,n=t._iO.onposition;if(n)for(e in n)n.hasOwnProperty(e)&&t.clearOnPosition(parseInt(e,10))},l=function(){t.isHTML5&&_t(t)},a=function(){t.isHTML5&&yt(t)},n=function(e){e||(p=[],c=0),f=!1,t._hasTimer=null,t._a=null,t._html5_canplay=!1,t.bytesLoaded=null,t.bytesTotal=null,t.duration=t._iO&&t._iO.duration?t._iO.duration:null,t.durationEstimate=null,t.buffered=[],t.eqData=[],t.eqData.left=[],t.eqData.right=[],t.failures=0,t.isBuffering=!1,t.instanceOptions={},t.instanceCount=0,t.loaded=!1,t.metadata={},t.readyState=0,t.muted=!1,t.paused=!1,t.peakData={left:0,right:0},t.waveformData={left:[],right:[]},t.playState=0,t.position=null,t.id3={}},n(),this._onTimer=function(e){var n,o=!1,i,a={};return t._hasTimer||e?(t._a&&(e||(t.playState>0||1===t.readyState)&&!t.paused)&&(n=t._get_html5_duration(),n!==y.duration&&(y.duration=n,t.duration=n,o=!0),t.durationEstimate=t.duration,i=1e3*t._a.currentTime||0,i!==y.time&&(y.time=i,o=!0),(o||e)&&t._whileplaying(i,a,a,a,a)),o):void 0},this._get_html5_duration=function(){var e=t._iO,n=t._a&&t._a.duration?1e3*t._a.duration:e&&e.duration?e.duration:null,o=n&&!isNaN(n)&&1/0!==n?n:null;return o},this._apply_loop=function(e,t){!e.loop&&t>1&&s._wD("Note: Native HTML5 looping is infinite."),e.loop=t>1?"loop":""},this._setup_html5=function(e){var i=H(t._iO,e),a=decodeURI,r=Et?s._global_a:t._a,l=a(i.url),u=r&&r._t?r._t.instanceOptions:null,d;if(r){if(r._t&&(Et||l!==a(_)?!Et||u.url!==i.url||_&&_!==u.url||(d=r):d=r,d))return t._apply_loop(r,i.loops),d;s._wD("setting URL on existing object: "+l+(_?", old URL: "+_:"")),Et&&r._t&&r._t.playState&&i.url!==u.url&&r._t.stop(),n(u&&u.url?i.url===u.url:_?_===i.url:!1),r.src=i.url,t.url=i.url,_=i.url,r._called_load=!1}else P("h5a"),t._a=i.autoLoad||i.autoPlay?new Audio(i.url):jt&&opera.version()<10?new Audio(null):new Audio,r=t._a,r._called_load=!1,Et&&(s._global_a=r);return t.isHTML5=!0,t._a=r,r._t=t,o(),t._apply_loop(r,i.loops),i.autoLoad||i.autoPlay?t.load():(r.autobuffer=!1,r.preload="auto"),r},o=function(){function e(e,n,o){return t._a?t._a.addEventListener(e,n,o||!1):null}if(t._a._added_events)return!1;var n;t._a._added_events=!0;for(n in xt)xt.hasOwnProperty(n)&&e(n,xt[n]);return!0},i=function(){function e(e,n,o){return t._a?t._a.removeEventListener(e,n,o||!1):null}var n;s._wD(d+"removing event listeners: "+t.id),t._a._added_events=!1;for(n in xt)xt.hasOwnProperty(n)&&e(n,xt[n])},this._onload=function(e){var n,o=!!e||!t.isHTML5&&8===w&&t.duration;return n="SMSound._onload(): ",s._wD(n+'"'+t.id+'"'+(o?" loaded.":" failed to load? - "+t.url),o?1:2),o||t.isHTML5||(s.sandbox.noRemote===!0&&s._wD(n+at("noNet"),1),s.sandbox.noLocal===!0&&s._wD(n+at("noLocal"),1)),t.loaded=o,t.readyState=o?3:2,t._onbufferchange(0),t._iO.onload&&t._iO.onload.apply(t,[o]),!0},this._onbufferchange=function(e){return 0===t.playState?!1:e&&t.isBuffering||!e&&!t.isBuffering?!1:(t.isBuffering=1===e,t._iO.onbufferchange&&(s._wD("SMSound._onbufferchange(): "+e),t._iO.onbufferchange.apply(t)),!0)},this._onsuspend=function(){return t._iO.onsuspend&&(s._wD("SMSound._onsuspend()"),t._iO.onsuspend.apply(t)),!0},this._onfailure=function(e,n,o){t.failures++,s._wD('SMSound._onfailure(): "'+t.id+'" count '+t.failures),t._iO.onfailure&&1===t.failures?t._iO.onfailure(t,e,n,o):s._wD("SMSound._onfailure(): ignoring")},this._onfinish=function(){var e=t._iO.onfinish;t._onbufferchange(0),t._resetOnPosition(0),t.instanceCount&&(t.instanceCount--,t.instanceCount||(h(),t.playState=0,t.paused=!1,t.instanceCount=0,t.instanceOptions={},t._iO={},a(),t.isHTML5&&(t.position=0)),(!t.instanceCount||t._iO.multiShotEvents)&&e&&(s._wD('SMSound._onfinish(): "'+t.id+'"'),e.apply(t)))},this._whileloading=function(e,n,o,i){var a=t._iO;t.bytesLoaded=e,t.bytesTotal=n,t.duration=Math.floor(o),t.bufferLength=i,t.durationEstimate=t.isHTML5||a.isMovieStar?t.duration:a.duration?t.duration>a.duration?t.duration:a.duration:parseInt(t.bytesTotal/t.bytesLoaded*t.duration,10),t.isHTML5||(t.buffered=[{start:0,end:t.duration}]),(3!==t.readyState||t.isHTML5)&&a.whileloading&&a.whileloading.apply(t)},this._whileplaying=function(e,n,o,i,a){var s=t._iO,r;return isNaN(e)||null===e?!1:(t.position=Math.max(0,e),t._processOnPosition(),!t.isHTML5&&w>8&&(s.usePeakData&&"undefined"!=typeof n&&n&&(t.peakData={left:n.leftPeak,right:n.rightPeak}),s.useWaveformData&&"undefined"!=typeof o&&o&&(t.waveformData={left:o.split(","),right:i.split(",")}),s.useEQData&&"undefined"!=typeof a&&a&&a.leftEQ&&(r=a.leftEQ.split(","),t.eqData=r,t.eqData.left=r,"undefined"!=typeof a.rightEQ&&a.rightEQ&&(t.eqData.right=a.rightEQ.split(",")))),1===t.playState&&(t.isHTML5||8!==w||t.position||!t.isBuffering||t._onbufferchange(0),s.whileplaying&&s.whileplaying.apply(t)),!0)},this._oncaptiondata=function(e){s._wD('SMSound._oncaptiondata(): "'+this.id+'" caption data received.'),t.captiondata=e,t._iO.oncaptiondata&&t._iO.oncaptiondata.apply(t,[e])},this._onmetadata=function(e,n){s._wD('SMSound._onmetadata(): "'+this.id+'" metadata received.');var o={},i,a;for(i=0,a=e.length;a>i;i++)o[e[i]]=n[i];t.metadata=o,t._iO.onmetadata&&t._iO.onmetadata.apply(t)},this._onid3=function(e,n){s._wD('SMSound._onid3(): "'+this.id+'" ID3 data received.');var o=[],i,a;for(i=0,a=e.length;a>i;i++)o[e[i]]=n[i];t.id3=H(t.id3,o),t._iO.onid3&&t._iO.onid3.apply(t)},this._onconnect=function(e){e=1===e,s._wD('SMSound._onconnect(): "'+t.id+'"'+(e?" connected.":" failed to connect? - "+t.url),e?1:2),t.connected=e,e&&(t.failures=0,ct(t.id)&&(t.getAutoPlay()?t.play(void 0,t.getAutoPlay()):t._iO.autoLoad&&t.load()),t._iO.onconnect&&t._iO.onconnect.apply(t,[e]))},this._ondataerror=function(e){t.playState>0&&(s._wD("SMSound._ondataerror(): "+e),t._iO.ondataerror&&t._iO.ondataerror.apply(t))}},Q=function(){return m.body||m._docElement||m.getElementsByTagName("div")[0]},f=function(e){return m.getElementById(e)},H=function(e,t){var n=e||{},o,i;o="undefined"==typeof t?s.defaultOptions:t;for(i in o)o.hasOwnProperty(i)&&"undefined"==typeof n[i]&&(n[i]="object"!=typeof o[i]||null===o[i]?o[i]:H(n[i],o[i]));return n},k={onready:1,ontimeout:1,defaultOptions:1,flash9Options:1,movieStarOptions:1},E=function(e,t){var n,o=!0,i="undefined"!=typeof t,a=s.setupOptions,r=k;if("undefined"==typeof e){o=[];for(n in a)a.hasOwnProperty(n)&&o.push(n);for(n in r)r.hasOwnProperty(n)&&o.push("object"==typeof s[n]?n+": {...}":s[n]instanceof Function?n+": function() {...}":n);return s._wD(at("setup",o.join(", "))),!1}for(n in e)if(e.hasOwnProperty(n))if("object"!=typeof e[n]||null===e[n]||e[n]instanceof Array)i&&"undefined"!=typeof r[t]?s[t][n]=e[n]:"undefined"!=typeof a[n]?(s.setupOptions[n]=e[n],s[n]=e[n]):"undefined"==typeof r[n]?(pt(at("undefined"==typeof s[n]?"setupUndef":"setupError",n),2),o=!1):s[n]instanceof Function?s[n].apply(s,e[n]instanceof Array?e[n]:[e[n]]):s[n]=e[n];else{if("undefined"!=typeof r[n])return E(e[n],n);pt(at("undefined"==typeof s[n]?"setupUndef":"setupError",n),2),o=!1}return o},It=function(){function e(e){var t=Ht.call(e),n=t.length;return i?(t[1]="on"+t[1],n>3&&t.pop()):3===n&&t.push(!1),t}function t(e,t){var n=e.shift(),o=[a[t]];i?n[o](e[0],e[1]):n[o].apply(n,e)}function n(){t(e(arguments),"add")}function o(){t(e(arguments),"remove")}var i=c.attachEvent,a={add:i?"attachEvent":"addEventListener",remove:i?"detachEvent":"removeEventListener"};return{add:n,remove:o}}(),xt={abort:i(function(){s._wD(d+"abort: "+this._t.id)}),canplay:i(function(){var e=this._t,t;if(e._html5_canplay)return!0;if(e._html5_canplay=!0,s._wD(d+"canplay: "+e.id+", "+e.url),e._onbufferchange(0),t="undefined"==typeof e._iO.position||isNaN(e._iO.position)?null:e._iO.position/1e3,e.position&&this.currentTime!==t){s._wD(d+"canplay: setting position to "+t);try{this.currentTime=t}catch(n){s._wD(d+"setting position of "+t+" failed: "+n.message,2)}}e._iO._oncanplay&&e._iO._oncanplay()}),canplaythrough:i(function(){var e=this._t;e.loaded||(e._onbufferchange(0),e._whileloading(e.bytesLoaded,e.bytesTotal,e._get_html5_duration()),e._onload(!0))}),ended:i(function(){var e=this._t;s._wD(d+"ended: "+e.id),e._onfinish()}),error:i(function(){s._wD(d+"error: "+this.error.code),this._t._onload(!1)}),loadeddata:i(function(){var e=this._t;s._wD(d+"loadeddata: "+this._t.id),e._loaded||Wt||(e.duration=e._get_html5_duration())}),loadedmetadata:i(function(){s._wD(d+"loadedmetadata: "+this._t.id)}),loadstart:i(function(){s._wD(d+"loadstart: "+this._t.id),this._t._onbufferchange(1)}),play:i(function(){s._wD(d+"play: "+this._t.id+", "+this._t.url),this._t._onbufferchange(0)}),playing:i(function(){s._wD(d+"playing: "+this._t.id),this._t._onbufferchange(0)}),progress:i(function(e){var t=this._t,n,o,i,a=0,r="progress"===e.type,l=e.target.buffered,u=e.loaded||0,f=e.total||1,p=1e3;if(t.buffered=[],l&&l.length){for(n=0,o=l.length;o>n;n++)t.buffered.push({start:l.start(n)*p,end:l.end(n)*p});if(a=(l.end(0)-l.start(0))*p,u=a/(e.target.duration*p),r&&l.length>1){for(i=[],o=l.length,n=0;o>n;n++)i.push(e.target.buffered.start(n)*p+"-"+e.target.buffered.end(n)*p);s._wD(d+"progress: timeRanges: "+i.join(", "))}r&&!isNaN(u)&&s._wD(d+"progress: "+t.id+": "+Math.floor(100*u)+"% loaded")}isNaN(u)||(t._onbufferchange(0),t._whileloading(u,f,t._get_html5_duration()),u&&f&&u===f&&xt.canplaythrough.call(this,e))}),ratechange:i(function(){s._wD(d+"ratechange: "+this._t.id)}),suspend:i(function(e){var t=this._t;s._wD(d+"suspend: "+t.id),xt.progress.call(this,e),t._onsuspend()}),stalled:i(function(){s._wD(d+"stalled: "+this._t.id)}),timeupdate:i(function(){this._t._onTimer()}),waiting:i(function(){var e=this._t;s._wD(d+"waiting: "+e.id),e._onbufferchange(1)})},Mt=function(e){var t;return t=e.serverURL||e.type&&o(e.type)?!1:e.type?St({type:e.type}):St({url:e.url})||s.html5Only},Tt=function(e,t){e&&(e.src=t)},St=function(e){if(!s.useHTML5Audio||!s.hasHTML5)return!1;var t=e.url||null,n=e.type||null,i=s.audioFormats,a,r,l,u;if(n&&"undefined"!=typeof s.html5[n])return s.html5[n]&&!o(n);if(!Lt){Lt=[];for(u in i)i.hasOwnProperty(u)&&(Lt.push(u),i[u].related&&(Lt=Lt.concat(i[u].related)));Lt=new RegExp("\\.("+Lt.join("|")+")(\\?.*)?$","i")}return l=t?t.toLowerCase().match(Lt):null,l&&l.length?l=l[1]:n?(r=n.indexOf(";"),l=(-1!==r?n.substr(0,r):n).substr(6)):a=!1,l&&"undefined"!=typeof s.html5[l]?a=s.html5[l]&&!o(l):(n="audio/"+l,a=s.html5.canPlayType({type:n}),s.html5[l]=a,a=a&&s.html5[n]&&!o(n)),a},Ft=function(){function e(e){var n,o,i,a=!1,r=!1;if(!t||"function"!=typeof t.canPlayType)return a;if(e instanceof Array){for(o=0,i=e.length;i>o;o++)(s.html5[e[o]]||t.canPlayType(e[o]).match(s.html5Test))&&(r=!0,s.html5[e[o]]=!0,s.flash[e[o]]=!!e[o].match(Xt));a=r}else n=t&&"function"==typeof t.canPlayType?t.canPlayType(e):!1,a=!(!n||!n.match(s.html5Test));return a}if(!s.useHTML5Audio||!s.hasHTML5)return!1;var t="undefined"!=typeof Audio?jt&&opera.version()<10?new Audio(null):new Audio:null,n,o,i={},a,r;a=s.audioFormats;for(n in a)if(a.hasOwnProperty(n)&&(o="audio/"+n,i[n]=e(a[n].type),i[o]=i[n],n.match(Xt)?(s.flash[n]=!0,s.flash[o]=!0):(s.flash[n]=!1,s.flash[o]=!1),a[n]&&a[n].related))for(r=a[n].related.length-1;r>=0;r--)i["audio/"+a[n].related[r]]=i[n],s.html5[a[n].related[r]]=i[n],s.flash[a[n].related[r]]=i[n];return i.canPlayType=t?e:null,s.html5=H(s.html5,i),!0},W={notReady:"Not loaded yet - wait for soundManager.onready()",notOK:"Audio support is not available.",domError:u+"createMovie(): appendChild/innerHTML call failed. DOM not ready or other error.",spcWmode:u+"createMovie(): Removing wmode, preventing known SWF loading issue(s)",swf404:l+": Verify that %s is a valid path.",tryDebug:"Try "+l+".debugFlash = true for more security details (output goes to SWF.)",checkSWF:"See SWF output for more debug info.",localFail:l+": Non-HTTP page ("+m.location.protocol+" URL?) Review Flash player security settings for this special case:\nhttp://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html\nMay need to add/allow path, eg. c:/sm2/ or /users/me/sm2/",waitFocus:l+": Special case: Waiting for SWF to load with window focus...",waitImpatient:l+": Getting impatient, still waiting for Flash%s...",waitForever:l+": Waiting indefinitely for Flash (will recover if unblocked)...",waitSWF:l+": Retrying, waiting for 100% SWF load...",needFunction:l+": Function object expected for %s",badID:'Warning: Sound ID "%s" should be a string, starting with a non-numeric character',currentObj:"--- "+l+"._debug(): Current sound objects ---",waitEI:u+"initMovie(): Waiting for ExternalInterface call from Flash...",waitOnload:l+": Waiting for window.onload()",docLoaded:l+": Document already loaded",onload:u+"initComplete(): calling soundManager.onload()",onloadOK:l+".onload() complete",init:u+"init()",didInit:u+"init(): Already called?",flashJS:l+": Attempting JS to Flash call...",secNote:"Flash security note: Network/internet URLs will not load due to security restrictions. Access can be configured via Flash Player Global Security Settings Page: http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html",badRemove:"Warning: Failed to remove flash movie.",shutdown:l+".disable(): Shutting down",queue:l+": Queueing %s handler",smFail:l+": Failed to initialise.",smError:"SMSound.load(): Exception: JS-Flash communication failed, or JS error.",fbTimeout:"No flash response, applying ."+lt.swfTimedout+" CSS...",fbLoaded:"Flash loaded",fbHandler:u+"flashBlockHandler()",manURL:"SMSound.load(): Using manually-assigned URL",onURL:l+".load(): current URL already assigned.",badFV:l+'.flashVersion must be 8 or 9. "%s" is invalid. Reverting to %s.',as2loop:"Note: Setting stream:false so looping can work (flash 8 limitation)",noNSLoop:"Note: Looping not implemented for MovieStar formats",needfl9:"Note: Switching to flash 9, required for MP4 formats.",mfTimeout:"Setting flashLoadTimeout = 0 (infinite) for off-screen, mobile flash case",needFlash:l+": Fatal error: Flash is needed to play some required formats, but is not available.",gotFocus:l+": Got window focus.",mfOn:"mobileFlash::enabling on-screen flash repositioning",policy:"Enabling usePolicyFile for data access",setup:l+".setup(): allowed parameters: %s",setupError:l+'.setup(): "%s" cannot be assigned with this method.',setupUndef:l+'.setup(): Could not find option "%s"',setupLate:l+".setup(): url + flashVersion changes will not take effect until reboot().",h5a:"creating HTML5 Audio() object",noURL:l+": Flash URL required. Call soundManager.setup({url:...}) to get started."},at=function(){var e=Ht.call(arguments),t=e.shift(),n=W&&W[t]?W[t]:"",o,i;
if(n&&e&&e.length)for(o=0,i=e.length;i>o;o++)n=n.replace("%s",e[o]);return n},dt=function(e){return 8===w&&e.loops>1&&e.stream&&(P("as2loop"),e.stream=!1),e},ft=function(e,t){return e&&!e.usePolicyFile&&(e.onid3||e.usePeakData||e.useWaveformData||e.useEQData)&&(s._wD((t||"")+at("policy")),e.usePolicyFile=!0),e},pt=function(e){"undefined"!=typeof console&&"undefined"!=typeof console.warn?console.warn(e):s._wD(e)},_=function(){return!1},et=function(e){var t;for(t in e)e.hasOwnProperty(t)&&"function"==typeof e[t]&&(e[t]=_);t=null},tt=function(e){"undefined"==typeof e&&(e=!1),(L||e)&&(P("smFail",2),s.disable(e))},nt=function(e){var t=null,n;if(e)if(e.match(/\.swf(\?.*)?$/i)){if(t=e.substr(e.toLowerCase().lastIndexOf(".swf?")+4))return e}else e.lastIndexOf("/")!==e.length-1&&(e+="/");return n=(e&&-1!==e.lastIndexOf("/")?e.substr(0,e.lastIndexOf("/")+1):"./")+s.movieURL,s.noSWFCache&&(n+="?ts="+(new Date).getTime()),n},U=function(){w=parseInt(s.flashVersion,10),8!==w&&9!==w&&(s._wD(at("badFV",w,Z)),s.flashVersion=w=Z);var e=s.debugMode||s.debugFlash?"_debug.swf":".swf";s.useHTML5Audio&&!s.html5Only&&s.audioFormats.mp4.required&&9>w&&(s._wD(at("needfl9")),s.flashVersion=w=9),s.version=s.versionNumber+(s.html5Only?" (HTML5-only mode)":9===w?" (AS3/Flash 9)":" (AS2/Flash 8)"),w>8?(s.defaultOptions=H(s.defaultOptions,s.flash9Options),s.features.buffering=!0,s.defaultOptions=H(s.defaultOptions,s.movieStarOptions),s.filePatterns.flash9=new RegExp("\\.(mp3|"+en.join("|")+")(\\?.*)?$","i"),s.features.movieStar=!0):s.features.movieStar=!1,s.filePattern=s.filePatterns[8!==w?"flash9":"flash8"],s.movieURL=(8===w?"soundmanager2.swf":"soundmanager2_flash9.swf").replace(".swf",e),s.features.peakData=s.features.waveformData=s.features.eqData=w>8},G=function(e,t){return r?void r._setPolling(e,t):!1},z=function(){if(s.debugURLParam.test(h)&&(s.debugMode=!0),f(s.debugID))return!1;var e,t,n,o,i;if(!(!s.debugMode||f(s.debugID)||Jt&&s.useConsole&&s.consoleOnly)){e=m.createElement("div"),e.id=s.debugID+"-toggle",o={position:"fixed",bottom:"0px",right:"0px",width:"1.2em",height:"1.2em",lineHeight:"1.2em",margin:"2px",textAlign:"center",border:"1px solid #999",cursor:"pointer",background:"#fff",color:"#333",zIndex:10001},e.appendChild(m.createTextNode("-")),e.onclick=ut,e.title="Toggle SM2 debug console",p.match(/msie 6/i)&&(e.style.position="absolute",e.style.cursor="hand");for(i in o)o.hasOwnProperty(i)&&(e.style[i]=o[i]);if(t=m.createElement("div"),t.id=s.debugID,t.style.display=s.debugMode?"block":"none",s.debugMode&&!f(e.id)){try{n=Q(),n.appendChild(e)}catch(a){throw new Error(at("domError")+" \n"+a.toString())}n.appendChild(t)}}n=null},ct=this.getSoundById,P=function(e,t){return e?s._wD(at(e),t):""},h.indexOf("sm2-debug=alert")+1&&s.debugMode&&(s._wD=function(t){e.alert(t)}),ut=function(){var e=f(s.debugID),t=f(s.debugID+"-toggle");return e?(b?(t.innerHTML="+",e.style.display="none"):(t.innerHTML="-",e.style.display="block"),void(b=!b)):!1},O=function(e,t,n){if("undefined"!=typeof sm2Debugger)try{sm2Debugger.handleEvent(e,t,n)}catch(o){}return!0},rt=function(){var e=[];return s.debugMode&&e.push(lt.sm2Debug),s.debugFlash&&e.push(lt.flashDebug),s.useHighPerformance&&e.push(lt.highPerf),e.join(" ")},st=function(){var e=at("fbHandler"),t=s.getMoviePercent(),n=lt,o={type:"FLASHBLOCK"};return s.html5Only?!1:void(s.ok()?(s.didFlashBlock&&s._wD(e+": Unblocked"),s.oMC&&(s.oMC.className=[rt(),n.swfDefault,n.swfLoaded+(s.didFlashBlock?" "+n.swfUnblocked:"")].join(" "))):(Ot&&(s.oMC.className=rt()+" "+n.swfDefault+" "+(null===t?n.swfTimedout:n.swfError),s._wD(e+": "+at("fbTimeout")+(t?" ("+at("fbLoaded")+")":""))),s.didFlashBlock=!0,A({type:"ontimeout",ignoreInit:!0,error:o}),X(o)))},C=function(e,t,n){"undefined"==typeof v[e]&&(v[e]=[]),v[e].push({method:t,scope:n||null,fired:!1})},A=function(e){if(e||(e={type:s.ok()?"onready":"ontimeout"}),!S&&e&&!e.ignoreInit)return!1;if("ontimeout"===e.type&&(s.ok()||L&&!e.ignoreInit))return!1;var t={success:e&&e.ignoreInit?s.ok():!L},n=e&&e.type?v[e.type]||[]:[],o=[],i,a,r=[t],u=Ot&&s.useFlashBlock&&!s.ok();for(e.error&&(r[0].error=e.error),i=0,a=n.length;a>i;i++)n[i].fired!==!0&&o.push(n[i]);if(o.length)for(s._wD(l+": Firing "+o.length+" "+e.type+"() item"+(1===o.length?"":"s")),i=0,a=o.length;a>i;i++)o[i].scope?o[i].method.apply(o[i].scope,r):o[i].method.apply(this,r),u||(o[i].fired=!0);return!0},x=function(){c.setTimeout(function(){s.useFlashBlock&&st(),A(),"function"==typeof s.onload&&(P("onload",1),s.onload.apply(c),P("onloadOK",1)),s.waitForWindowLoad&&It.add(c,"load",x)},1)},Ct=function(){if("undefined"!=typeof kt)return kt;var e=!1,t=navigator,n=t.plugins,o,i,a,s=c.ActiveXObject;if(n&&n.length)i="application/x-shockwave-flash",a=t.mimeTypes,a&&a[i]&&a[i].enabledPlugin&&a[i].enabledPlugin.description&&(e=!0);else if("undefined"!=typeof s){try{o=new s("ShockwaveFlash.ShockwaveFlash")}catch(r){}e=!!o}return kt=e,e},Dt=function(){var e,t,n=!0,o=s.audioFormats,i=Rt&&!!p.match(/os (1|2|3_0|3_1)/i);if(i?(s.hasHTML5=!1,s.html5Only=!0,s.oMC&&(s.oMC.style.display="none"),n=!1):s.useHTML5Audio&&(s.html5&&s.html5.canPlayType||(s._wD("SoundManager: No HTML5 Audio() support detected."),s.hasHTML5=!1),Vt&&s._wD(u+"Note: Buggy HTML5 Audio in Safari on this OS X release, see https://bugs.webkit.org/show_bug.cgi?id=32159 - "+(kt?"will use flash fallback for MP3/MP4, if available":" would use flash fallback for MP3/MP4, but none detected."),1)),s.useHTML5Audio&&s.hasHTML5)for(t in o)o.hasOwnProperty(t)&&(o[t].required&&!s.html5.canPlayType(o[t].type)||s.preferFlash&&(s.flash[t]||s.flash[o[t].type]))&&(e=!0);return s.ignoreFlash&&(e=!1),s.html5Only=s.hasHTML5&&s.useHTML5Audio&&!e,!s.html5Only},bt=function(e){var t,n,o=0,i;if(e instanceof Array){for(t=0,n=e.length;n>t;t++)if(e[t]instanceof Object){if(s.canPlayMIME(e[t].type)){o=t;break}}else if(s.canPlayURL(e[t])){o=t;break}e[o].url&&(e[o]=e[o].url),i=e[o]}else i=e;return i},_t=function(e){e._hasTimer||(e._hasTimer=!0,!qt&&s.html5PollingInterval&&(null===vt&&0===wt&&(vt=c.setInterval(gt,s.html5PollingInterval)),wt++))},yt=function(e){e._hasTimer&&(e._hasTimer=!1,!qt&&s.html5PollingInterval&&wt--)},gt=function(){var e;if(null!==vt&&!wt)return c.clearInterval(vt),vt=null,!1;for(e=s.soundIDs.length-1;e>=0;e--)s.sounds[s.soundIDs[e]].isHTML5&&s.sounds[s.soundIDs[e]]._hasTimer&&s.sounds[s.soundIDs[e]]._onTimer()},X=function(e){e="undefined"!=typeof e?e:{},"function"==typeof s.onerror&&s.onerror.apply(c,[{type:"undefined"!=typeof e.type?e.type:null}]),"undefined"!=typeof e.fatal&&e.fatal&&s.disable()},At=function(){if(!Vt||!Ct())return!1;var e=s.audioFormats,t,n;for(n in e)if(e.hasOwnProperty(n)&&("mp3"===n||"mp4"===n)&&(s._wD(l+": Using flash fallback for "+n+" format"),s.html5[n]=!1,e[n]&&e[n].related))for(t=e[n].related.length-1;t>=0;t--)s.html5[e[n].related[t]]=!1},this._setSandboxType=function(e){var t=s.sandbox;t.type=e,t.description=t.types["undefined"!=typeof t.types[e]?e:"unknown"],s._wD("Flash security sandbox type: "+t.type),"localWithFile"===t.type?(t.noRemote=!0,t.noLocal=!1,P("secNote",2)):"localWithNetwork"===t.type?(t.noRemote=!1,t.noLocal=!0):"localTrusted"===t.type&&(t.noRemote=!1,t.noLocal=!1)},this._externalInterfaceOK=function(e,t){if(s.swfLoaded)return!1;var n,o=(new Date).getTime();return s._wD(u+"externalInterfaceOK()"+(e?" (~"+(o-e)+" ms)":"")),O("swf",!0),O("flashtojs",!0),s.swfLoaded=!0,$t=!1,Vt&&At(),t&&t.replace(/\+dev/i,"")===s.versionNumber.replace(/\+dev/i,"")?void setTimeout(g,Ut?100:1):(n=l+': Fatal: JavaScript file build "'+s.versionNumber+'" does not match Flash SWF build "'+t+'" at '+s.url+". Ensure both are up-to-date.",setTimeout(function i(){throw new Error(n)},0),!1)},K=function(e,t){function n(){s._wD("-- SoundManager 2 "+s.version+(!s.html5Only&&s.useHTML5Audio?s.hasHTML5?" + HTML5 audio":", no HTML5 audio support":"")+(s.html5Only?"":(s.useHighPerformance?", high performance mode, ":", ")+((s.flashPollingInterval?"custom ("+s.flashPollingInterval+"ms)":"normal")+" polling")+(s.wmode?", wmode: "+s.wmode:"")+(s.debugFlash?", flash debug mode":"")+(s.useFlashBlock?", flashBlock mode":""))+" --",1)}function o(e,t){return'<param name="'+e+'" value="'+t+'" />'}if(D&&M)return!1;if(s.html5Only)return U(),n(),s.oMC=f(s.movieID),g(),D=!0,M=!0,!1;var i=t||s.url,a=s.altURL||i,r="JS/Flash audio component (SoundManager 2)",l=Q(),d=rt(),c=null,h=m.getElementsByTagName("html")[0],_,y,w,v,b,O,S,L;if(c=h&&h.dir&&h.dir.match(/rtl/i),e="undefined"==typeof e?s.id:e,U(),s.url=nt(zt?i:a),t=s.url,s.wmode=!s.wmode&&s.useHighPerformance?"transparent":s.wmode,null!==s.wmode&&(p.match(/msie 8/i)||!Ut&&!s.useHighPerformance)&&navigator.platform.match(/win32|win64/i)&&(P("spcWmode"),s.wmode=null),_={name:e,id:e,src:t,quality:"high",allowScriptAccess:s.allowScriptAccess,bgcolor:s.bgColor,pluginspage:Yt+"www.macromedia.com/go/getflashplayer",title:r,type:"application/x-shockwave-flash",wmode:s.wmode,hasPriority:"true"},s.debugFlash&&(_.FlashVars="debug=1"),s.wmode||delete _.wmode,Ut)y=m.createElement("div"),v=['<object id="'+e+'" data="'+t+'" type="'+_.type+'" title="'+_.title+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="'+Yt+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0">',o("movie",t),o("AllowScriptAccess",s.allowScriptAccess),o("quality",_.quality),s.wmode?o("wmode",s.wmode):"",o("bgcolor",s.bgColor),o("hasPriority","true"),s.debugFlash?o("FlashVars",_.FlashVars):"","</object>"].join("");else{y=m.createElement("embed");for(w in _)_.hasOwnProperty(w)&&y.setAttribute(w,_[w])}if(z(),d=rt(),l=Q())if(s.oMC=f(s.movieID)||m.createElement("div"),s.oMC.id)L=s.oMC.className,s.oMC.className=(L?L+" ":lt.swfDefault)+(d?" "+d:""),s.oMC.appendChild(y),Ut&&(b=s.oMC.appendChild(m.createElement("div")),b.className=lt.swfBox,b.innerHTML=v),M=!0;else{if(s.oMC.id=s.movieID,s.oMC.className=lt.swfDefault+" "+d,O=null,b=null,s.useFlashBlock||(s.useHighPerformance?O={position:"fixed",width:"8px",height:"8px",bottom:"0px",left:"0px",overflow:"hidden"}:(O={position:"absolute",width:"6px",height:"6px",top:"-9999px",left:"-9999px"},c&&(O.left=Math.abs(parseInt(O.left,10))+"px"))),Bt&&(s.oMC.style.zIndex=1e4),!s.debugFlash)for(S in O)O.hasOwnProperty(S)&&(s.oMC.style[S]=O[S]);try{Ut||s.oMC.appendChild(y),l.appendChild(s.oMC),Ut&&(b=s.oMC.appendChild(m.createElement("div")),b.className=lt.swfBox,b.innerHTML=v),M=!0}catch(T){throw new Error(at("domError")+" \n"+T.toString())}}return D=!0,n(),s._wD(u+"createMovie(): Trying to load "+t+(!zt&&s.altURL?" (alternate URL)":""),1),!0},j=function(){return s.html5Only?(K(),!1):r?!1:s.url?(r=s.getMovie(s.id),r||(ot?(Ut?s.oMC.innerHTML=it:s.oMC.appendChild(ot),ot=null,D=!0):K(s.id,s.url),r=s.getMovie(s.id)),r&&P("waitEI"),"function"==typeof s.oninitmovie&&setTimeout(s.oninitmovie,1),!0):(P("noURL"),!1)},N=function(){setTimeout(R,1e3)},R=function(){var e,t=!1;return s.url?ht?!1:(ht=!0,It.remove(c,"load",N),$t&&!Qt?(P("waitFocus"),!1):(S||(e=s.getMoviePercent(),s._wD(at("waitImpatient",e>0?" (SWF "+e+"% loaded)":"")),e>0&&100>e&&(t=!0)),void setTimeout(function(){return e=s.getMoviePercent(),t?(ht=!1,s._wD(at("waitSWF")),c.setTimeout(N,1),!1):(S||(s._wD(l+": No Flash response within expected time.\nLikely causes: "+(0===e?"Loading "+s.movieURL+" may have failed (and/or Flash "+w+"+ not present?), ":"")+"Flash blocked or JS-Flash security error."+(s.debugFlash?" "+at("checkSWF"):""),2),!zt&&e&&(P("localFail",2),s.debugFlash||P("tryDebug",2)),0===e&&s._wD(at("swf404",s.url)),O("flashtojs",!1," (Check flash security or flash blockers)")),void(!S&&Kt&&(null===e?s.useFlashBlock||0===s.flashLoadTimeout?(s.useFlashBlock&&st(),P("waitForever")):tt(!0):0===s.flashLoadTimeout?P("waitForever"):tt(!0))))},s.flashLoadTimeout))):!1},B=function(){function e(){It.remove(c,"focus",B)}return Qt||!$t?(e(),!0):(Kt=!0,Qt=!0,P("gotFocus"),ht=!1,N(),e(),!0)},Nt=function(){var e,t=[];if(s.useHTML5Audio&&s.hasHTML5){for(e in s.audioFormats)s.audioFormats.hasOwnProperty(e)&&t.push(e+": "+s.html5[e]+(!s.html5[e]&&kt&&s.flash[e]?" (using flash)":s.preferFlash&&s.flash[e]&&kt?" (preferring flash)":s.html5[e]?"":" ("+(s.audioFormats[e].required?"required, ":"")+"and no flash support)"));s._wD("-- SoundManager 2: HTML5 support tests ("+s.html5Test+"): "+t.join(", ")+" --",1)}},I=function(e){if(S)return!1;if(s.html5Only)return s._wD("-- SoundManager 2: loaded --"),S=!0,x(),O("onload",!0),!0;var t=s.useFlashBlock&&s.flashLoadTimeout&&!s.getMoviePercent(),n=!0,o;return t||(S=!0,L&&(o={type:!kt&&Ot?"NO_FLASH":"INIT_TIMEOUT"})),s._wD("-- SoundManager 2 "+(L?"failed to load":"loaded")+" ("+(L?"Flash security/load error":"OK")+") --",1),L||e?(s.useFlashBlock&&s.oMC&&(s.oMC.className=rt()+" "+(null===s.getMoviePercent()?lt.swfTimedout:lt.swfError)),A({type:"ontimeout",error:o,ignoreInit:!0}),O("onload",!1),X(o),n=!1):O("onload",!0),L||(s.waitForWindowLoad&&!T?(P("waitOnload"),It.add(c,"load",x)):(s.waitForWindowLoad&&T&&P("docLoaded"),x())),n},y=function(){var e,t=s.setupOptions;for(e in t)t.hasOwnProperty(e)&&("undefined"==typeof s[e]?s[e]=t[e]:s[e]!==t[e]&&(s.setupOptions[e]=s[e]))},g=function(){function e(){It.remove(c,"load",s.beginDelayedInit)}if(P("init"),S)return P("didInit"),!1;if(s.html5Only)return S||(e(),s.enabled=!0,I()),!0;j();try{P("flashJS"),r._externalInterfaceTest(!1),G(!0,s.flashPollingInterval||(s.useHighPerformance?10:50)),s.debugMode||r._disableDebug(),s.enabled=!0,O("jstoflash",!0),s.html5Only||It.add(c,"unload",_)}catch(t){return s._wD("js/flash exception: "+t.toString()),O("jstoflash",!1),X({type:"JS_TO_FLASH_EXCEPTION",fatal:!0}),tt(!0),I(),!1}return I(),e(),!0},q=function(){return J?!1:(J=!0,y(),z(),function(){var e="sm2-usehtml5audio=",t="sm2-preferflash=",n=null,o=null,i="undefined"!=typeof console&&"function"==typeof console.log,a=h.toLowerCase();-1!==a.indexOf(e)&&(n="1"===a.charAt(a.indexOf(e)+e.length),i&&console.log((n?"Enabling ":"Disabling ")+"useHTML5Audio via URL parameter"),s.setup({useHTML5Audio:n})),-1!==a.indexOf(t)&&(o="1"===a.charAt(a.indexOf(t)+t.length),i&&console.log((o?"Enabling ":"Disabling ")+"preferFlash via URL parameter"),s.setup({preferFlash:o}))}(),!kt&&s.hasHTML5&&(s._wD("SoundManager: No Flash detected"+(s.useHTML5Audio?". Trying HTML5-only mode.":", enabling HTML5.")),s.setup({useHTML5Audio:!0,preferFlash:!1})),Ft(),s.html5.usingFlash=Dt(),Ot=s.html5.usingFlash,Nt(),!kt&&Ot&&(P("needFlash"),s.setup({flashLoadTimeout:1})),m.removeEventListener&&m.removeEventListener("DOMContentLoaded",q,!1),j(),!0)},Pt=function(){return"complete"===m.readyState&&(q(),m.detachEvent("onreadystatechange",Pt)),!0},V=function(){T=!0,It.remove(c,"load",V)},Ct(),It.add(c,"focus",B),It.add(c,"load",N),It.add(c,"load",V),m.addEventListener?m.addEventListener("DOMContentLoaded",q,!1):m.attachEvent?m.attachEvent("onreadystatechange",Pt):(O("onload",!1),X({type:"NO_DOM2_EVENTS",fatal:!0}))}var n=null;"undefined"!=typeof SM2_DEFER&&SM2_DEFER||(n=new t),e.SoundManager=t,e.soundManager=n}(window);